MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 #include <p16f684.inc>
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC16F684 processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2014 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
                      00523         LIST
                      00002 
2007   3FF4           00003  __CONFIG _FOSC_INTOSCIO & _WDTE_OFF & _PWRTE_OFF & _MCLRE_ON & _CP_OFF & _CPD_OFF & _BOREN_ON & _IESO_O
                            N & _FCMEN_ON
                      00004 
                      00005     errorlevel  -302                ; suppress message 302 from list file
                      00006 
  00000000            00007 ADDR_EE_POS EQU 0x00
  00000002            00008 IrDAb       EQU RA2
  00000005            00009 IrDAp       EQU PORTA
  00000001            00010 DEVICE      EQU 0X01    ; MODO TV DO CONTROLE SONY RMT-V297C
                      00011 
  00000020            00012 STACK_BASE  EQU 0X20
  0000006F            00013 STACK_LIMIT EQU 0X6F
                      00014 
                      00015 
                      00016             UDATA   0X50
0050                  00017 IrDA_bits   res 1
0051                  00018 IrDA_discard res 1
0052                  00019 IrDA_DATA   res 3
0055                  00020 IrDA_comand res 1
0056                  00021 IrDA_device res 1
                      00022 
0057                  00023 pos_value   res 1   ; 0 desligado, outros define o nível de luminosidade
0058                  00024 motor_pos   res 1
0059                  00025 counter     res 1
                      00026 
005A                  00027 B1          res 1
005B                  00028 B2          res 1
005C                  00029 LOOP_BCD_COUNTER    res 1
005D                  00030 VALUE_BIN   res 1
                      00031 
                      00032 
                      00033 
                      00034 INT_VAR     UDATA_SHR
0000                  00035 w_temp      res 1   ; armazena backup do acumulador
0001                  00036 w_bk        res 1
0002                  00037 status_temp res 1
                      00038 
                      00039 
0003                  00040 record_data res 1
0004                  00041 record_addr res 1
                      00042 
                      00043 RESET_VECTOR    CODE    0x0000     ; processor reset vector
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0000   2???           00044         goto    start              ; go to beginning of program
                      00045 
                      00046 
                      00047 ;============================================================================
                      00048 ; Seção de tratamento de interrupções
                      00049 ;
                      00050 ;   ESTA ESTRUTURA FOI UTILIZADA PARA NÃO PERMITIR CHAMADAS CONTINUAS DENTRO
                      00051 ;   DESTA FUNÇÃO CASO SEJA CHAMADO MAIS DE UMA INTERRUPÇÃO, SERVE PARA MANTER
                      00052 ;   A HIERARQUIA DE PROCESSAMENTO
                      00053 ;
                      00054 ;============================================================================
                      00055 INT_VECTOR      CODE    0x0004     ; interrupt vector location
                      00056 
0004                  00057 INTERRUPT
0004   1018           00058         BCF     WDTCON, SWDTEN  ; DESTIVA O WATCH-DOG TIMER
0005   138B           00059         BCF     INTCON, GIE     ; DESABILITA INTERRUPÇÃO GLOBAL
                      00060 
0006   2???           00061         CALL    PUSHCTX
                      00062 
0007   188B           00063         BTFSC   INTCON, INTF    ; TESTA SE A INTERRUPÇÃO OCORREU PELA ENTRADA DO IrDA
0008   2???           00064         GOTO    IrDA_FALLING
0009   188C           00065         BTFSC   PIR1, TMR2IF    ; TESTA SE A INTERRUPÇÃO ACONTECEU PELO CONTADOR
000A   2???           00066         GOTO    IrDA_TIME
                      00067 
                      00068 
000B                  00069 END_INTERRUPT
000B   2???           00070         CALL    POPCTX
000C   178B           00071         BSF     INTCON, GIE     ; HABILITA INTERRUPÇÃO GLOBAL
000D   0009           00072         retfie                  ; return from interrupt
                      00073 
000E                  00074 IrDA_FALLING
000E   2???           00075         CALL    IrDA_FALL    ; CHAMA ROTINA DE TRATAMENTO DA RECEPÇÃO DO CONTROLE REMOTO
000F   2???           00076         GOTO    END_INTERRUPT
0010                  00077 IrDA_TIME
0010   2???           00078         CALL    IrDA_SAMPLER
0011   2???           00079         GOTO    END_INTERRUPT
                      00080 
                      00081 
                      00082 ;============================================================================
                      00083 ; boostrap da máquina
                      00084 ;
                      00085 ;
                      00086 ;
                      00087 ;============================================================================
                      00088 
                      00089 MAIN    CODE
                      00090 
0000                  00091 start   ; PRÉ-SET DO AMBIENTE DE EXECUÇÃO
0000   018B           00092         CLRF    INTCON
                      00093 
0001   1683           00094         BSF     STATUS, RP0     ; APONTA PARA BLOCO 1
0002   3001           00095         MOVLW   b'00000001'
0003   0081           00096         MOVWF   OPTION_REG      ; DEFINE PRESCALER DO TIMER 0, COLOCA INT/RA2 EM FALLING EDGE
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0004   301F           00097         MOVLW   0X1F            ; b'00011111'
0005   0085           00098         MOVWF   TRISA           ; DEFINE I/O DA PORTA A
0006   0187           00099         CLRF    TRISC           ; DEFINE PORTA C COMO SAÍDAS
0007   3008           00100         MOVLW   b'00001000'
0008   0091           00101         MOVWF   ANSEL           ; DEFINE AS PORTAS QUE SÃO ANALÓGICAS
0009   0196           00102         CLRF    IOCA
000A   3007           00103         MOVLW   0X07
000B   0095           00104         MOVWF   WPUA            ; DEFINE AS PORTAS QUE POSSUEM PULL-UP
                      00105         ;MOVLW   0X30
000C   3010           00106         MOVLW   0X10
000D   009F           00107         MOVWF   ADCON1          ; DEFINE OSCILADOR DEDICADO PARA O CONVERSOR A/D
000E   3002           00108         MOVLW   b'00000010'
000F   008C           00109         MOVWF   PIE1            ; HABILITA INTERRUPÇÃO POR TIMER2
0010   30E1           00110         MOVLW   0XE1
0011   0092           00111         MOVWF   PR2             ; COLOCA 160 NO COMPARADOR DO TIMER 2 (IrDA) 2560 us EM 4MHz
                      00112 
                      00113 
0012   1283           00114         BCF     STATUS, RP0     ; APONTA PARA O BANCO 0
0013   0185           00115         CLRF    PORTA           ; INIT PORTA
0014   0187           00116         CLRF    PORTC
0015   3007           00117         MOVLW   0X07
0016   0099           00118         MOVWF   CMCON0          ; DESLIGA OS COMPARADORES
0017   300C           00119         MOVLW   0X0C
0018   009F           00120         MOVWF   ADCON0          ; HABILITA ENTRADA ANALÓGICA 3 E AJUSTA PARA SAIDA JUSTIFICADA A ESQUERD
                            A
0019   3016           00121         MOVLW   0X16
001A   0098           00122         MOVWF   WDTCON          ; AJUSTA PRESCALER DO WATCH-DOG PARA 1:65536 ~ 2 segundos
001B   018C           00123         CLRF    PIR1            ; ZERA FLAGS DE INTERRUPÇÕES DOS PERIFÉRICOS
                      00124 
001C   3050           00125         MOVLW   b'01010000'
001D   008B           00126         MOVWF   INTCON          ; HABILITA INT/RA2, PERIFÉRICOS
                      00127 
                      00128         ; Inicalização da RAM
                      00129         ;BTFSC   EECON1, WRERR   ; TESTA SE HOUVE ERRO DE GRAVAÇÃO DURANTE RESET
                      00130         ;CALL    RECORD_POSITION
                      00131         ;CALL    READ_POSITION
                      00132 
                      00133         ; Teste da interação
001E   3070           00134         MOVLW   0X70
001F   00??           00135         MOVWF   pos_value
                      00136         ;CALL    RECORD_POSITION
                      00137 
0020   2???           00138         CALL    INIT_IrDA
0021   3084           00139         MOVLW   0X84
0022   00??           00140         MOVWF   IrDA_device
                      00141 
                      00142 ;        CLRF    record_addr
0023   178B           00143         BSF     INTCON, GIE
                      00144 
0024   3020           00145         MOVLW   b'00100000'
0025   0685           00146         XORWF   PORTA, F
0026   3020           00147         MOVLW   0X20
0027   0084           00148         MOVWF   FSR
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0028   3003           00149         MOVLW   0x03
                      00150 
0029                  00151 LOOP_MAIN   ; loop de execução continua
0029   2???           00152         call    LDR_REFRESH
002A   2???           00153         GOTO    LOOP_MAIN
                      00154 
002B   2???           00155 SELF    GOTO    SELF
                      00156 
                      00157 ;============================================================================
                      00158 ;
                      00159 ; Seção com funções
                      00160 ;
                      00161 ;
                      00162 ;============================================================================
                      00163 
                      00164 FUNCTIONS CODE
                      00165 
                      00166 ;============================================================================
                      00167 ;
                      00168 ;   FUNÇÕES PUSH-POP PARA IMPLEMENTAR UMA PILHA
                      00169 ;
                      00170 ;============================================================================
                      00171 
0000                  00172 PUSHW:      ; COLOCA O CONTEÚDO DE W NO TOPO DA PILHA
0000   0080           00173         MOVWF       INDF          ; COLOCA W NA PILHA
0001   0F84           00174         INCFSZ      FSR, F        ; INCREMENTA PONTEIRO SEM ALTERAR Z
0002   0008           00175         RETURN
                      00176 
0003                  00177 POPW:       ; REMOVE O TOPO DA PILHA E COLOCA EM W
0003   0B84           00178         DECFSZ      FSR, F      ; DECREMENTA PONTEIRO SEM ALTERAR ESTADOS
0004   0E80           00179         SWAPF       INDF, F
0005   0E00           00180         SWAPF       INDF, W     ; COLOCA TOPO DA PILHA EM W
0006   0008           00181         RETURN
                      00182 
0007                  00183 PUSHCTX:    ; SALVA CONTEXTO NA PILHA
0007   2???           00184         CALL    PUSHW           ; salva w
0008   0E03           00185         SWAPF   STATUS, W
0009   2???           00186         CALL    PUSHW           ; salva status
000A   0008           00187         RETURN
000B                  00188 POPCTX:     ; RECUPERA CONTEXTO DA PILHA
000B   2???           00189         CALL    POPW
000C   00??           00190         MOVWF   status_temp
000D   0E??           00191         SWAPF   status_temp, W   ; restaura status
000E   0083           00192         MOVWF   STATUS
000F   2???           00193         CALL    POPW        ; restaura w
0010   0008           00194         RETURN
                      00195 
                      00196 
                      00197 ;============================================================================
                      00198 ;
                      00199 ;   Delay de 1000 ciclos de clock de instrução
                      00200 ;
                      00201 ;     Presupõe que a interrupção de overflow do timer0 está desativada, caso
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00202 ;   contrário o comportamento é imprevisível.
                      00203 ;
                      00204 ;     O timer utiliza um ajuste para se obter o consumo de 1000 ciclos desde
                      00205 ;   a instrução de chamada até o retorno na instrução seguinte
                      00206 ;
                      00207 ;==============================================================================
                      00208 
0011                  00209 DELAYms: ; com preescaler em 1:4 desde o call até o retorno gasta 1000 ciclos
                      00210 
                      00211         ; AJUSTA PARÂMETROS DO CONTADOR
                      00212         ;
                      00213         ; PRESCALER 1:4
                      00214         ; INCREMENTA NA DESCIDA DO CLOCK
                      00215         ; USA O CLOCK DE INSTRUÇÃO COMO BATE DE TEMPO
                      00216         ;
0011   30C0           00217         MOVLW   b'11000000'
0012   0501           00218         ANDWF   OPTION_REG, W
0013   3801           00219         IORLW   b'00000001'
0014   0081           00220         MOVWF   OPTION_REG
                      00221 
                      00222 ;laço do timer
0015   300A           00223         MOVLW   0X0A                ; AJUSTA CONTADOR PARA GERAR A SAÍDA CORRETA
0016   0081           00224         MOVWF   TMR0                ; ATUALIZA CONTADOR
0017   110B           00225         BCF     INTCON, T0IF
0018   1D0B           00226         BTFSS   INTCON, T0IF
0019   2???           00227         GOTO $-1
001A   0008           00228     RETURN
                      00229 
                      00230 
                      00231 ;============================================================================
                      00232 ;
                      00233 ;   INICIALIZA ESTRUTURAS PARA RECEPÇÃO DE UM COMANDO DO CONTROLE REMOTO
                      00234 ;
                      00235 ;============================================================================
001B                  00236 INIT_IrDA:
001B   01??           00237         CLRF    IrDA_bits
001C   3011           00238         MOVLW   b'00010001'     ; PRESCALER 1:4 POSTSCALER 1:3
001D   0092           00239         MOVWF   T2CON
001E   0191           00240         CLRF    TMR2            ; ZERA CONTADOR
001F   0008           00241         RETURN
                      00242 
                      00243 ;============================================================================
                      00244 ;
                      00245 ; TRATAMENTO DA RECEPÇÃO DOS DADOS DO CONTROLE REMOTO
                      00246 ; PRESUPOE QUE TIMER 2 NÃO É USADO POR MAIS NINGUEM
                      00247 ;
                      00248 ;============================================================================
0020                  00249 IrDA_FALL:
0020   108B           00250         BCF     INTCON, INTF    ; ZERA O BIT DA INTERRUPÇÃO
0021   1A92           00251         BTFSC   T2CON, 5        ; TESTA SE É 1:5
0022   2???           00252         GOTO    IrDA_FALL_SAMPLE_1
                      00253 
0023   1912           00254         BTFSC   T2CON, TMR2ON
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0024   2???           00255         GOTO    IrDA_FALL_ABORT
                      00256 
0025   1A12           00257         BTFSC   T2CON, 4        ; TESTA SE ESTA NO 1:3
0026   2???           00258         GOTO    IrDA_FALL_SAMPLE
                      00259 
0027                  00260 IrDA_FALL_ABORT
0027   2???           00261         CALL INIT_IrDA
0028   0008           00262         RETURN
                      00263 
0029                  00264 IrDA_FALL_SAMPLE_1
0029   1292           00265         BCF     T2CON, 5
002A                  00266 IrDA_FALL_SAMPLE
002A   0191           00267         CLRF    TMR2
002B   1512           00268         BSF     T2CON, TMR2ON
002C   0008           00269         RETURN
                      00270 
                      00271 ;===========================================================================
                      00272 ;
                      00273 ;   ROTINA QUE TRATA DA LEITURA DO BIT DO IrDA NA PORTA
                      00274 ;   BYTE 0 - DEVICE
                      00275 ;   BYTE 1 - COMANDO
                      00276 ;   BYTE 2 - EXTENÇÃO (SÓ EM 20 BITS)
                      00277 ;
                      00278 ;   INTERRUPÇÃO DEVE CESSAR DEPOIS DE ALTERAR ESTADO DA MÁQUINA DE ESTADOS
                      00279 ;===========================================================================
                      00280 
002D                  00281 IrDA_SAMPLER:
                      00282 
002D   108C           00283         BCF     PIR1, TMR2IF    ; ZERA O BIT DA INTERRUPÇÃO
002E   1A92           00284         BTFSC   T2CON, 5        ; TESTA SE É 1:5
002F   2???           00285         GOTO    IrDA_SAMPLER_5  ; 1:5
0030   1E12           00286         BTFSS   T2CON, 4        ;TESTA DE É 1:3
0031   2???           00287         GOTO    IrDA_SAMPLER_1
0032   1D05           00288         BTFSS   IrDAp, IrDAb ; TESTA NÍVEL LÓGICO DA PORTA, DEVE SER ALTO
0033   2???           00289         GOTO    IrDA_SAMPLER_ABORT
0034   1212           00290         BCF     T2CON, 4
0035   2???           00291         GOTO    IrDA_SAMPLER_3
                      00292 
0036                  00293 IrDA_SAMPLER_1
0036   0A??           00294         INCF    IrDA_bits, F
                      00295 
0037   1003           00296         BCF     STATUS, C       ; INVERTE BIT VINDO DA LÓGICA
0038   1D05           00297         BTFSS   IrDAp, IrDAb
0039   1403           00298         BSF     STATUS, C
                      00299 
                      00300         ; COLOCA BIT NO ARRAY
003A   0C??           00301         RRF     IrDA_DATA, F
003B   0C??           00302         RRF     IrDA_DATA+1, F
003C   0C??           00303         RRF     IrDA_DATA+2, F
                      00304 
003D                  00305 IrDA_SAMPLER_3
003D   1692           00306         BSF     T2CON, 5    ; ATIVA POSTSCALER 1:5
003E   0191           00307         CLRF    TMR2
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

003F   0008           00308         RETURN
                      00309 
                      00310 
                      00311 ; PRESCALER DE 1:5
                      00312 ; ATINGIU O LIMITE DE TEMPO DE ESPERA
                      00313 ; VERIFICA SE A QUANTIDADE DE BITS SE ENQUADRA EM ALGUM PADRÃO
0040                  00314 IrDA_SAMPLER_5
                      00315 
0040   300C           00316         MOVLW   0X0C    ; 12 BITS
0041   06??           00317         XORWF   IrDA_bits, W
0042   1903           00318         BTFSC   STATUS, Z
0043   2???           00319         GOTO    IrDA_COMMAND_12_BITS
                      00320 
0044   300F           00321         MOVLW   0X0F    ; 15 BITS
0045   06??           00322         XORWF   IrDA_bits, W
0046   1903           00323         BTFSC   STATUS, Z
0047   2???           00324         GOTO    IrDA_COMMAND_15_BITS
                      00325 
0048   3014           00326         MOVLW   0X14    ; 20 BITS
0049   06??           00327         XORWF   IrDA_bits, W
004A   1D03           00328         BTFSS   STATUS, Z
004B   2???           00329         CALL    IrDA_SAMPLER_ABORT
                      00330 
                      00331 ; INTERVALO DE CÓDIGO QUE CORRIGE POSIÇÃO DOS BITS
                      00332 
004C   08??           00333         MOVF    IrDA_DATA, W
004D   00??           00334         MOVWF   w_temp
004E   08??           00335         MOVF    IrDA_DATA+1, W
004F   00??           00336         MOVWF   IrDA_DATA
0050   08??           00337         MOVF    IrDA_DATA+2, W
0051   00??           00338         MOVWF   IrDA_DATA+1
0052   08??           00339         MOVF    w_temp, W
0053   00??           00340         MOVWF   IrDA_DATA+2
                      00341 
0054                  00342 IrDA_COMMAND_12_BITS
0054   30F0           00343         MOVLW   b'11110000'
0055   05??           00344         ANDWF   IrDA_DATA+1, F
0056   0C??           00345         RRF     IrDA_DATA, F
0057   0C??           00346         RRF     IrDA_DATA+1, F
0058   0C??           00347         RRF     IrDA_DATA, F
0059   0C??           00348         RRF     IrDA_DATA+1, F
005A   0C??           00349         RRF     IrDA_DATA, F
005B   0C??           00350         RRF     IrDA_DATA+1, F
                      00351 
005C                  00352 IrDA_COMMAND_15_BITS
                      00353 
005C   1003           00354         BCF     STATUS, C
005D   0C??           00355         RRF     IrDA_DATA+1, F
                      00356 
                      00357 ; FIM DAS CORREÇÕES DE POSIÇÃO
                      00358 
                      00359 
005E   08??           00360         MOVF    IrDA_DATA, W
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

005F   3A01           00361         XORLW   DEVICE
0060   1D03           00362         BTFSS   STATUS, Z           ; testa dispositivo
0061   2???           00363         GOTO    IrDA_SAMPLER_ABORT
                      00364 
                      00365 
0062   03??           00366         DECF    IrDA_discard, F
0063   3003           00367         MOVLW   0x03
0064   05??           00368         ANDWF   IrDA_discard, F
0065   1D03           00369         BTFSS   STATUS, Z
                      00370         ;GOTO    IrDA_SAMPLER_ABORT  ; descarta envio triplo do controle
                      00371 
                      00372 
                      00373         ;MOVF    IrDA_DATA+1, W
                      00374         ;XORWF   IrDA_comand, W
                      00375         ;BTFSC   STATUS, Z
                      00376         ;GOTO    IrDA_SAMPLER_ABORT  ; tratar manter precionada
                      00377 
                      00378         ;MOVF    IrDA_DATA+1, W
                      00379         ;MOVWF   IrDA_comand
                      00380 
0066   03??           00381         DECF    IrDA_discard, F
                      00382 
                      00383         ; LOCALIZAR AÇÃO NA TABELA
0067   08??           00384         MOVF    IrDA_DATA+1, W
0068   2???           00385         CALL    REMOTE_CONTROL_COMMANDS
0069   00??           00386         MOVWF   w_temp
006A   3800           00387         IORLW   0X00
006B   1903           00388         BTFSC   STATUS, Z ; TESTA SE EXISTE AÇÃO PARA ESTA TECLA
006C   2???           00389         GOTO    IrDA_SAMPLER_ABORT
                      00390 
006D   08??           00391         MOVF    w_temp, W
                      00392 
006E   018A           00393         CLRF    PCLATH
006F   0082           00394         MOVWF   PCL
0070                  00395 command_1
0070                  00396 command_2
0070                  00397 command_3
0070                  00398 command_4
0070                  00399 command_5
0070                  00400 command_6
0070                  00401 command_7
0070                  00402 command_8
0070                  00403 command_9
0070                  00404 command_0
0070                  00405 command_enter
0070                  00406 command_close_all
0070                  00407 command_open_all
                      00408 
                      00409 ; para o movimento ficar suave manter o tempo total desta execução em 4ms
0070                  00410 command_motor_direct
0070   01??           00411         clrf    counter
0071   2???           00412 st1     call    MOTOR_REVERSE
0072   2???           00413         call    DELAYms
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0073   2???           00414         call    DELAYms
0074   0A??           00415         incf    counter, F
0075   3002           00416         movlw   0x02
0076   06??           00417         xorwf   counter, w
0077   1D03           00418         btfss   STATUS, Z
0078   2???           00419         goto    st1
0079   2???           00420         call    MOTOR_OFF
007A   2???           00421         goto    RETORNO_DE_COMANDO
                      00422 
                      00423 ; para o movimento ficar suave manter o tempo total desta execução em 4ms
007B                  00424 command_motor_reverse
007B   01??           00425         clrf    counter
007C   2???           00426 st2     call    MOTOR_DIRECT
007D   2???           00427         call    DELAYms
007E   2???           00428         call    DELAYms
007F   0A??           00429         incf    counter, F
0080   3002           00430         movlw   0x02
0081   06??           00431         xorwf   counter, w
0082   1D03           00432         btfss   STATUS, Z
0083   2???           00433         goto    st2
0084   2???           00434         call    MOTOR_OFF
0085   2???           00435         goto    RETORNO_DE_COMANDO
                      00436 
                      00437 
                      00438 
                      00439 
0086                  00440 RETORNO_DE_COMANDO
0086   1283           00441         BCF     STATUS, RP0
0087   3020           00442         MOVLW   b'00100000'
0088   0685           00443         XORWF   PORTA, F
                      00444 
0089                  00445 IrDA_SAMPLER_ABORT
0089   2???           00446         CALL    INIT_IrDA       ; INICIALIZA ESTRUTURAS
008A   0008           00447         RETURN
                      00448 
                      00449 
                      00450 
                      00451 ;=============================================================================
                      00452 ;
                      00453 ;   GERENCIA SEQUENCIA PARA LEITURA E GRAVAÇÃO NA EEPROM
                      00454 ;
                      00455 ;=============================================================================
                      00456 
008B                  00457 RECORD_EEPROM:
008B   138B           00458         BCF     INTCON, GIE     ; DESATIVA INTERRUPÇÃO GLOBAL
008C   1B8B           00459         BTFSC   INTCON, GIE     ; TESTA SE INTERRUPÇÃO FOI DESABILITADA
008D   2???           00460         GOTO    $-2             ; REPETE SE AINDA NÃO ESTÁ DESATIVADO
008E   1683           00461         BSF     STATUS, RP0     ; APONTA PARA BLOCO 1
008F   119C           00462         BCF     EECON1, WRERR   ; REMOVE MARCAÇÃO DE ERRO DE GRAVAÇÃO
0090   151C           00463         BSF     EECON1, WREN    ; HABILITA GRAVAÇÃO
                      00464         ;MOVF    pos_value, W   ; COLOCA O DADO NO REGISTRADOR DE DADOS
0091   009A           00465         MOVWF   EEDAT
0092   08??           00466         MOVF    record_addr, W     ; COLOCA A POSIÇÃO NO REGISTRADOR DE POSIÇÃO
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0093   009B           00467         MOVWF   EEADR
                      00468         ; SEQUENCIA DE INICIALIZAÇÃO EXIGIDA PARA A GRAVAÇÃO NA EEPROM
0094   3055           00469         MOVLW   0X55
0095   009D           00470         MOVWF   EECON2
0096   30AA           00471         MOVLW   0XAA
0097   009D           00472         MOVWF   EECON2
0098   149C           00473         BSF     EECON1, WR      ; ATIVA GRAVAÇÃO
                      00474         ; FIM DA SEQUENCIA EXIGIDA
0099   189C           00475         BTFSC   EECON1, WR      ; TESTA SE GRAVAÇÃO FOI CONCLUIDA
009A   2???           00476         GOTO $-1
009B   1283           00477         BCF     STATUS, RP0
009C   178B           00478         BSF     INTCON, GIE     ; HABILITA INTERRUPÇÃO GLOBAL
009D   0008           00479         RETURN
                      00480 
009E                  00481 READ_EEPROM:
009E   138B           00482         BCF     INTCON, GIE
009F   1683           00483         BSF     STATUS, RP0     ; APONTA PARA BLOCO 1
00A0   3000           00484         MOVLW   ADDR_EE_POS
00A1   009B           00485         MOVWF   EEADR
00A2   141C           00486         BSF     EECON1, RD
00A3   181C           00487         BTFSC   EECON1, RD
00A4   2???           00488         GOTO    $-1
00A5   081A           00489         MOVF    EEDAT, W
00A6   00??           00490         MOVWF   pos_value
00A7   1283           00491         BCF     STATUS, RP0
00A8   178B           00492         BSF     INTCON, GIE
00A9   0008           00493         RETURN
                      00494 
                      00495 ;=============================================================================
                      00496 ;
                      00497 ; Rotina que implementa a conversão A/D do sensor de luminosidade e permanece
                      00498 ; até que se atinja o nível de luminosidade desejado
                      00499 ;
                      00500 ;=============================================================================
00AA                  00501 LDR_REFRESH:
00AA   141F           00502         BSF     ADCON0, ADON        ; LIGA CONVERSOR A/D
00AB   149F           00503         BSF     ADCON0, GO_NOT_DONE ; INICIA CONVERSÃO
                      00504 
00AC                  00505 AD_DONE
00AC   189F           00506         BTFSC   ADCON0, GO_NOT_DONE ; TESTA SE TERMINOU
00AD   2???           00507         GOTO    AD_DONE
00AE   081E           00508         MOVF    ADRESH, W           ; ARMAZENA O RESULTADO DA CONVERSÃO
                      00509 
00AF   02??           00510         SUBWF   pos_value, W        ; COMPARA OS VALORES
00B0   1903           00511         BTFSC   STATUS, Z           ; SE SÃO IGUAIS NÃO FAZ NADA
00B1   2???           00512         GOTO    REFRESH_END
00B2   149F           00513         BSF     ADCON0, GO_NOT_DONE ; INICIA NOVA CONVERSÃO
                      00514 
00B3   1803           00515         BTFSC   STATUS, C
00B4   2???           00516         goto    AD_FORWARD
00B5   2???           00517         CALL    MOTOR_REVERSE            ; sentido anti-horário
00B6                  00518 AD_END
00B6   2???           00519         CALL    DELAYms
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00B7   2???           00520         CALL    DELAYms
00B8   2???           00521         CALL    DELAYms
00B9   2???           00522         CALL    DELAYms
00BA   2???           00523         CALL    DELAYms
00BB   2???           00524         GOTO    AD_DONE
                      00525 
                      00526 
00BC                  00527 AD_FORWARD
00BC   2???           00528         CALL    MOTOR_DIRECT            ; sentido horário
00BD   2???           00529         GOTO    AD_END
                      00530 
00BE                  00531 REFRESH_END
00BE   101F           00532         BCF     ADCON0, ADON    ; DESLIGA CONVERSOR
00BF   2???           00533         CALL    MOTOR_OFF       ; REMOVE CONSUMO DE CORRENTE
00C0   0008           00534         RETURN
                      00535 
                      00536 ;=============================================================================
                      00537 ;
                      00538 ;   GERENCIA O MOTOR DE PASSO CONECTADO AS SAÍDAS RC2~RC5
                      00539 
00C1                  00540 MOTOR_OFF:
00C1   01??           00541         CLRF    w_temp
00C2   2???           00542         GOTO    MOTOR_DO
00C3                  00543 MOTOR_DIRECT:
00C3   0A??           00544         INCF    motor_pos, F
00C4   2???           00545         GOTO    $+2
00C5                  00546 MOTOR_REVERSE:
00C5   03??           00547         DECF    motor_pos, F
00C6   08??           00548         MOVF    motor_pos, W
00C7   2???           00549         CALL    BIT_PATTERN
00C8   00??           00550         MOVWF   w_temp
                      00551 
00C9                  00552 MOTOR_DO
00C9   30C3           00553         MOVLW   b'11000011'
00CA   0507           00554         ANDWF   PORTC, W
00CB   04??           00555         IORWF   w_temp, W
00CC   0087           00556         MOVWF   PORTC
00CD   0008           00557         RETURN
                      00558 
                      00559 
                      00560 
                      00561 ;=============================================================================
                      00562 ;
                      00563 ;   RETORNA A POSIÇÃO ATUAL DO MOTOR NA TABELA
                      00564 ;
                      00565 ;   NÃO É UTIL NO MOMENTO POIS A POSIÇÃO DE PARADA É COM SAÍDA EM ZERO
                      00566 ;=============================================================================
00CE                  00567 MOTOR_STATE:
00CE   1E87           00568     BTFSS   PORTC, RC5
00CF   2???           00569     GOTO    MOTOR_STATE_ARM1
00D0   1907           00570     BTFSC   PORTC, RC2
00D1   3407           00571     RETLW   0X07
00D2   1E07           00572     BTFSS   PORTC, RC4
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00D3   3406           00573     RETLW   0X06
00D4   3405           00574     RETLW   0X05
00D5                  00575 MOTOR_STATE_ARM1
00D5   1D87           00576     BTFSS   PORTC, RC3
00D6   2???           00577     GOTO    MOTOR_STATE_ARM2
00D7   1907           00578     BTFSC   PORTC, RC2
00D8   3401           00579     RETLW   0X01
00D9   1E07           00580     BTFSS   PORTC, RC4
00DA   3402           00581     RETLW   0X02
00DB   3403           00582     RETLW   0X03
00DC                  00583 MOTOR_STATE_ARM2
00DC   1E07           00584     BTFSS   PORTC, RC4
00DD   3400           00585     RETLW   0X00
00DE   3404           00586     RETLW   0X04
                      00587 
                      00588 
                      00589 ;-----------------------------------------------------------------------------
                      00590 ;
                      00591 ;   Conversor binário -> BCD
                      00592 ;
                      00593 ;-----------------------------------------------------------------------------
                      00594 
00DF                  00595 BCD_CONVERT:
00DF   00??           00596     MOVWF VALUE_BIN
                      00597         ;inicializa laco (8 vezes)
00E0   3080           00598         MOVLW 0x80
00E1   00??           00599         MOVWF LOOP_BCD_COUNTER
00E2   01??           00600     CLRF B1                     ;b1; - primeiro byte com dois nibbles de bcd
00E3   01??           00601     CLRF B2                     ;b2; - segundo byte, com um unico nibble de bcd
                      00602 
00E4   2???           00603         GOTO KEEP_SHIFTING
00E5                  00604 LOOP_SHIFT
00E5   1980           00605         BTFSC B1, 3                 ;Testa se primeiro nibble eh maior ou igual a oito
00E6   2???           00606         GOTO ADD_B1_0
00E7   1D00           00607         BTFSS B1, 2                 ;Testa se eh maior ou igual a quatro
00E8   2???           00608         GOTO TEST_B1_1                          ;nibble ok, continuar
00E9   1880           00609         BTFSC B1, 1
00EA   2???           00610         GOTO ADD_B1_0                           ;tem que somar
00EB   1C00           00611         BTFSS B1, 0
00EC   2???           00612         GOTO TEST_B1_1
                      00613 
00ED                  00614 ADD_B1_0                                                ;primeiro nibble eh maior que 5
00ED   3003           00615         MOVLW 0x03
00EE   07??           00616         ADDWF B1, f                                     ;adiciona 3 ao nibble
                      00617 
00EF                  00618 TEST_B1_1
00EF   1B80           00619         BTFSC B1, 7                 ;Testa se primeiro nibble eh maior ou igual a oito
00F0   2???           00620         GOTO ADD_B1_1
00F1   1F00           00621         BTFSS B1, 6                 ;Testa se eh maior ou igual a quatro
00F2   2???           00622         GOTO TEST_B2                            ;nibble ok, continuar
00F3   1A80           00623         BTFSC B1, 5
00F4   2???           00624         GOTO ADD_B1_1                           ;tem que somar
00F5   1E00           00625         BTFSS B1, 4
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00F6   2???           00626         GOTO TEST_B2
                      00627 
00F7                  00628 ADD_B1_1                                                ;segundo nibble eh maior que 5
00F7   3030           00629         MOVLW 0x30
00F8   07??           00630         ADDWF B1, f                                     ;adiciona 3 ao nibble
                      00631 
00F9                  00632 TEST_B2
00F9   1980           00633         BTFSC B2, 3                 ;Testa se primeiro nibble eh maior ou igual a oito
00FA   2???           00634         GOTO ADD_B2
00FB   1D00           00635         BTFSS B2, 2                 ;Testa se eh maior ou igual a quatro
00FC   2???           00636         GOTO KEEP_SHIFTING                      ;nibble ok, continuar
00FD   1880           00637         BTFSC B2, 1
00FE   2???           00638         GOTO ADD_B2                                     ;tem que somar
00FF   1C00           00639         BTFSS B2, 0
0100   2???           00640         GOTO KEEP_SHIFTING
                      00641 
0101                  00642 ADD_B2
0101   3003           00643         MOVLW 0x03
0102   07??           00644         ADDWF B2, f                 ;adiciona 3 ao nibble
                      00645 
0103                  00646 KEEP_SHIFTING
Message[305]: Using default destination of 1 (file).
0103   0D??           00647         RLF VALUE_BIN
Message[305]: Using default destination of 1 (file).
0104   0D??           00648         RLF B1                      ;joga bit de carry no primeiro bit do registrador, shifta o registra
                            dor
Message[305]: Using default destination of 1 (file).
0105   0D??           00649         RLF B2                      ;de novo, passa ultimo bit adiante
                      00650 
0106   0C??           00651         RRF LOOP_BCD_COUNTER,f
0107   08??           00652         MOVF LOOP_BCD_COUNTER,f         ;testa se valor do registrador eh zero
0108   1D03           00653         BTFSS STATUS,Z              ;testa se chegamos ao fim da execucao
0109   2???           00654         GOTO LOOP_SHIFT
010A                  00655 final_da_execucao               ;realizar tratamentos finais
010A   0008           00656         RETURN
                      00657 
                      00658 
                      00659 ;=============================================================================
                      00660 ;
                      00661 ;   padrão de ativação das bobinas do motor de passo para meio passo
                      00662 ;
                      00663 ;=============================================================================
                      00664     org     0x0200  ; AJUSTA INICIO DAS TABELAS, 255 POSIÇÕES
0200                  00665 BIT_PATTERN:
0200   148A           00666     BSF     PCLATH, 1   ; ACERTA DESLOCAMENTO SOMADO AO PCL
0201   3907           00667     ANDLW   0X07        ; remove possíveis saltos para fora da tabela
0202   0782           00668     ADDWF   PCL, F      ; move o PC para a posição desejada
0203   3404           00669     RETLW b'00000100'   ; A
0204   340C           00670     RETLW b'00001100'   ; A~B
0205   3408           00671     RETLW b'00001000'   ; ~B
0206   3418           00672     RETLW b'00011000'   ; ~A~B
0207   3410           00673     RETLW b'00010000'   ; ~A
0208   3430           00674     RETLW b'00110000'   ; ~AB
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0209   3420           00675     RETLW b'00100000'   ; B
020A   3424           00676     RETLW b'00100100'   ; AB
                      00677 
                      00678 ;============================================================================
                      00679 ;
                      00680 ;   CONTROLE REMOTO SONY RMT-V297C
                      00681 ;
                      00682 ;   CÓDIGO DE DISPOSITIVO
                      00683 ;   TV
                      00684 ;   SIRC12  00001
                      00685 ;
                      00686 ;   VCR
                      00687 ;   SIRC12  01011
                      00688 ;   SIRC15  10111010
                      00689 ;
                      00690 ;
                      00691 ;   KEYMAP:
                      00692 ;
                      00693 ;   1                           0x00    VCR/TV
                      00694 ;   2                           0x01    VCR/TV
                      00695 ;   3                           0x02    VCR/TV
                      00696 ;   4                           0x03    VCR/TV
                      00697 ;   5                           0x04    VCR/TV
                      00698 ;   6                           0x05    VCR/TV
                      00699 ;   7                           0x06    VCR/TV
                      00700 ;   8                           0x07    VCR/TV
                      00701 ;   9                           0x08    VCR/TV
                      00702 ;   0                           0x09    VCR/TV
                      00703 ;   ENTER                       0x0B    VCR/TV
                      00704 ;
                      00705 ;   CH+                         0x10    VCR/TV
                      00706 ;   CH-                         0x11    VCR/TV
                      00707 ;   VOL+                        0x12    TV
                      00708 ;   VOL-                        0x13    TV
                      00709 ;   X2                          0x14    VCR
                      00710 ;   POWER                       0x15    VCR/TV
                      00711 ;   EJECT                       0x16    VCR
                      00712 ;   AUDIO MONITOR       0x17    VCR/TV
                      00713 ;   REC                         0x1D    VCR
                      00714 ;   SLOW                        0x23    VCR
                      00715 ;   TV/VIDEO            0x25    TV
                      00716 ;   TV/VIDEO            0x2A    VCR
                      00717 ;   DISPLAY                     0x3A    TV
                      00718 ;   MENU                        0x4D    VCR
                      00719 ;   INPUT SELECT        0x4F    VCR
                      00720 ;   INDEX RIGHT         0x56    VCR
                      00721 ;   INDEX LEFT          0x57    VCR
                      00722 ;   SP/EP                       0x58    VCR
                      00723 ;   DISPLAY                     0x5A    VCR
                      00724 ;   EASY TIMER          0x60    VCR
                      00725 ;   CLEAR                       0x63    VCR
                      00726 ;
                      00727 ;   UP                          0x0E    VCR SIRC15
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00728 ;   DOWN                        0x0F    VCR SIRC15
                      00729 ;   LEFT                        0x10    VCR SIRC15
                      00730 ;   RIGHT                       0x11    VCR SIRC15
                      00731 ;   PLAY/OK                     0x18    VCR SIRC15
                      00732 ;
                      00733 ;
                      00734 ;============================================================================
                      00735 
020B                  00736 REMOTE_CONTROL_COMMANDS:
020B   148A           00737     BSF     PCLATH, 1   ; ACERTA O DESLOCAMENTO SOMADO AO PCL
020C   393F           00738     ANDLW   0X3F        ; remove possíveis saltos para fora da tabela
020D   0782           00739     ADDWF   PCL, F      ; move o PC para a posição desejada
020E   3400           00740     RETLW   0X00        ;   1                           0x00    VCR/TV
020F   3400           00741     RETLW   0X00        ;   2                           0x01    VCR/TV
0210   3400           00742     RETLW   0X00        ;   3                           0x02    VCR/TV
0211   3400           00743     RETLW   0X00        ;   4                           0x03    VCR/TV
0212   3400           00744     RETLW   0X00        ;   5                           0x04    VCR/TV
0213   3400           00745     RETLW   0X00        ;   6                           0x05    VCR/TV
0214   3400           00746     RETLW   0X00        ;   7                           0x06    VCR/TV
0215   3400           00747     RETLW   0X00        ;   8                           0x07    VCR/TV
0216   3400           00748     RETLW   0X00        ;   9                           0x08    VCR/TV
0217   3400           00749     RETLW   0X00        ;   0                           0x09    VCR/TV
0218   3400           00750     RETLW   0X00        ;                   0x0A
0219   34??           00751     RETLW   RETORNO_DE_COMANDO        ;   ENTER                 0x0B    VCR/TV
021A   3400           00752     RETLW   0X00        ;                   0x0C
021B   3400           00753     RETLW   0X00        ;                   0x0D
021C   3400           00754     RETLW   0X00        ;                   0x0E
021D   3400           00755     RETLW   0X00        ;                   0x0F
021E   3400           00756     RETLW   0X00        ;   CH+                         0x10    VCR/TV
021F   3400           00757     RETLW   0X00        ;   CH-                         0x11    VCR/TV
0220   34??           00758     RETLW   command_motor_direct        ;   VOL+                        0x12    TV
0221   34??           00759     RETLW   command_motor_reverse        ;   VOL-                       0x13    TV
0222   3400           00760     RETLW   0X00        ;                   0x14
0223   3400           00761     RETLW   0X00        ;   POWER                       0x15    VCR/TV
0224   3400           00762     RETLW   0X00        ;                   0x16
0225   3400           00763     RETLW   0X00        ;   AUDIO MONITOR       0x17    VCR/TV
0226   3400           00764     RETLW   0X00        ;                   0x18
0227   3400           00765     RETLW   0X00        ;                   0x19
0228   3400           00766     RETLW   0X00        ;                   0x1A
0229   3400           00767     RETLW   0X00        ;                   0x1B
022A   3400           00768     RETLW   0X00        ;                   0x1C
022B   3400           00769     RETLW   0X00        ;                   0x1D
022C   3400           00770     RETLW   0X00        ;                   0x1E
022D   3400           00771     RETLW   0X00        ;                   0x1F
022E   3400           00772     RETLW   0X00        ;                   0x20
022F   3400           00773     RETLW   0X00        ;                   0x21
0230   3400           00774     RETLW   0X00        ;                   0x22
0231   3400           00775     RETLW   0X00        ;                   0x23
0232   3400           00776     RETLW   0X00        ;                   0x24
0233   3400           00777     RETLW   0X00        ;   TV/VIDEO            0x25    TV
0234   3400           00778     RETLW   0X00        ;                   0x26
0235   3400           00779     RETLW   0X00        ;                   0x27
0236   3400           00780     RETLW   0X00        ;                   0x28
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0237   3400           00781     RETLW   0X00        ;                   0x29
0238   3400           00782     RETLW   0X00        ;                   0x2A
0239   3400           00783     RETLW   0X00        ;                   0x2B
023A   3400           00784     RETLW   0X00        ;                   0x2C
023B   3400           00785     RETLW   0X00        ;                   0x2D
023C   3400           00786     RETLW   0X00        ;                   0x2E
023D   3400           00787     RETLW   0X00        ;                   0x2F
023E   3400           00788     RETLW   0X00        ;                   0x30
023F   3400           00789     RETLW   0X00        ;                   0x31
0240   3400           00790     RETLW   0X00        ;                   0x32
0241   3400           00791     RETLW   0X00        ;                   0x33
0242   3400           00792     RETLW   0X00        ;                   0x34
0243   3400           00793     RETLW   0X00        ;                   0x35
0244   3400           00794     RETLW   0X00        ;                   0x36
0245   3400           00795     RETLW   0X00        ;                   0x37
0246   3400           00796     RETLW   0X00        ;                   0x38
0247   3400           00797     RETLW   0X00        ;                   0x39
0248   3400           00798     RETLW   0X00        ;   DISPLAY                     0x3A    TV
0249   3400           00799     RETLW   0X00        ;                   0x3B
024A   3400           00800     RETLW   0X00        ;                   0x3C
024B   3400           00801     RETLW   0X00        ;                   0x3D
024C   3400           00802     RETLW   0X00        ;                   0x3E
024D   3400           00803     RETLW   0X00        ;                   0x3F
                      00804 
                      00805 
                      00806 
                      00807 ;TABELA PARA O DISPLAY DE SETE SEGMENTOS
024E                  00808 SEVEN_SEG_CODE_LOOKUP:
024E   148A           00809     BSF PCLATH, 1
024F   0782           00810     ADDWF PCL, F
0250   3403           00811     RETLW b'00000011'           ;0
0251   349F           00812     RETLW b'10011111'           ;1
0252   3425           00813     RETLW b'00100101'           ;2
0253   340D           00814     RETLW b'00001101'           ;3
0254   3499           00815     RETLW b'10011001'           ;4
0255   3449           00816     RETLW b'01001001'           ;5
0256   3441           00817     RETLW b'01000001'           ;6
0257   341F           00818     RETLW b'00011111'           ;7
0258   3401           00819     RETLW b'00000001'           ;8
0259   3409           00820     RETLW b'00001001'           ;9
                      00821 
                      00822 ; tabela com valores a serem somados no conversor bcd -> binário
025A                  00823 BCD_TO_BINARIO_DOZENS:
025A   00??           00824     MOVWF   w_temp
025B   3C09           00825     SUBLW   0X09
025C   1803           00826     BTFSC   STATUS, C
025D   34FF           00827     RETLW   0XFF
025E   148A           00828     BSF     PCLATH, 1
025F   0782           00829     ADDWF   PCL, F
0260   3400           00830     RETLW   0x00        ; 0
0261   340A           00831     RETLW   0x0A        ; 10
0262   3414           00832     RETLW   0x14        ; 20
0263   341E           00833     RETLW   0x1E        ; 30
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0264   3428           00834     RETLW   0x28        ; 40
0265   3432           00835     RETLW   0x32        ; 50
0266   343C           00836     RETLW   0x3C        ; 60
0267   3446           00837     RETLW   0x46        ; 70
0268   3450           00838     RETLW   0x50        ; 80
0269   345A           00839     RETLW   0x5A        ; 90
                      00840 
3FF4                  00841     END                         ; directive 'end of program'
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE 18


SYMBOL TABLE
  LABEL                             VALUE 

ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000004
ADCS1                             00000005
ADCS2                             00000006
ADDR_EE_POS                       00000000
ADD_B1_0                          000000ED
ADD_B1_1                          000000F7
ADD_B2                            00000101
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
AD_DONE                           000000AC
AD_END                            000000B6
AD_FORWARD                        000000BC
ANS0                              00000000
ANS1                              00000001
ANS2                              00000002
ANS3                              00000003
ANS4                              00000004
ANS5                              00000005
ANS6                              00000006
ANS7                              00000007
ANSEL                             00000091
B1                                0000005A
B2                                0000005B
BCD_CONVERT                       000000DF
BCD_TO_BINARIO_DOZENS             0000025A
BIT_PATTERN                       00000200
C                                 00000000
C1IE                              00000003
C1IF                              00000003
C1INV                             00000004
C1OUT                             00000006
C2IE                              00000004
C2IF                              00000004
C2INV                             00000005
C2OUT                             00000007
C2SYNC                            00000000
CCP1CON                           00000015
CCP1IE                            00000005
CCP1IF                            00000005
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCPR1                             00000013
CCPR1H                            00000014
CCPR1L                            00000013
CHS0                              00000002
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE 19


SYMBOL TABLE
  LABEL                             VALUE 

CHS1                              00000003
CHS2                              00000004
CIS                               00000003
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMCON0                            00000019
CMCON1                            0000001A
DC                                00000001
DC1B0                             00000004
DC1B1                             00000005
DELAYms                           00000011
DEVICE                            00000001
ECCPAS                            00000017
ECCPAS0                           00000004
ECCPAS1                           00000005
ECCPAS2                           00000006
ECCPASE                           00000007
ECCPIE                            00000005
ECCPIF                            00000005
EEADR                             0000009B
EECON1                            0000009C
EECON2                            0000009D
EEDAT                             0000009A
EEDATA                            0000009A
EEIE                              00000007
EEIF                              00000007
END_INTERRUPT                     0000000B
F                                 00000001
FSR                               00000004
GIE                               00000007
GO                                00000001
GO_DONE                           00000001
GO_NOT_DONE                       00000001
HTS                               00000002
INDF                              00000000
INIT_IrDA                         0000001B
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTERRUPT                         00000004
INTF                              00000001
IOC                               00000096
IOC0                              00000000
IOC1                              00000001
IOC2                              00000002
IOC3                              00000003
IOC4                              00000004
IOC5                              00000005
IOCA                              00000096
IOCA0                             00000000
IOCA1                             00000001
IOCA2                             00000002
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE 20


SYMBOL TABLE
  LABEL                             VALUE 

IOCA3                             00000003
IOCA4                             00000004
IOCA5                             00000005
IRCF0                             00000004
IRCF1                             00000005
IRCF2                             00000006
IRP                               00000007
IrDA_COMMAND_12_BITS              00000054
IrDA_COMMAND_15_BITS              0000005C
IrDA_DATA                         00000052
IrDA_FALL                         00000020
IrDA_FALLING                      0000000E
IrDA_FALL_ABORT                   00000027
IrDA_FALL_SAMPLE                  0000002A
IrDA_FALL_SAMPLE_1                00000029
IrDA_SAMPLER                      0000002D
IrDA_SAMPLER_1                    00000036
IrDA_SAMPLER_3                    0000003D
IrDA_SAMPLER_5                    00000040
IrDA_SAMPLER_ABORT                00000089
IrDA_TIME                         00000010
IrDA_bits                         00000050
IrDA_comand                       00000055
IrDA_device                       00000056
IrDA_discard                      00000051
IrDAb                             00000002
IrDAp                             00000005
KEEP_SHIFTING                     00000103
LDR_REFRESH                       000000AA
LOOP_BCD_COUNTER                  0000005C
LOOP_MAIN                         00000029
LOOP_SHIFT                        000000E5
LTS                               00000001
MOTOR_DIRECT                      000000C3
MOTOR_DO                          000000C9
MOTOR_OFF                         000000C1
MOTOR_REVERSE                     000000C5
MOTOR_STATE                       000000CE
MOTOR_STATE_ARM1                  000000D5
MOTOR_STATE_ARM2                  000000DC
NOT_BOD                           00000000
NOT_BOR                           00000000
NOT_DONE                          00000001
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RAPU                          00000007
NOT_T1SYNC                        00000002
NOT_TO                            00000004
OPTION_REG                        00000081
OSCCON                            0000008F
OSCTUNE                           00000090
OSFIE                             00000002
OSFIF                             00000002
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE 21


SYMBOL TABLE
  LABEL                             VALUE 

OSTS                              00000003
P1M0                              00000006
P1M1                              00000007
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PDC0                              00000000
PDC1                              00000001
PDC2                              00000002
PDC3                              00000003
PDC4                              00000004
PDC5                              00000005
PDC6                              00000006
PEIE                              00000006
PIE1                              0000008C
PIR1                              0000000C
POPCTX                            0000000B
POPW                              00000003
PORTA                             00000005
PORTC                             00000007
PR2                               00000092
PRSEN                             00000007
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PSSAC0                            00000002
PSSAC1                            00000003
PSSBD0                            00000000
PSSBD1                            00000001
PUSHCTX                           00000007
PUSHW                             00000000
PWM1CON                           00000016
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RAIE                              00000003
RAIF                              00000000
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RD                                00000000
READ_EEPROM                       0000009E
RECORD_EEPROM                     0000008B
REFRESH_END                       000000BE
REMOTE_CONTROL_COMMANDS           0000020B
RETORNO_DE_COMANDO                00000086
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE 22


SYMBOL TABLE
  LABEL                             VALUE 

RP0                               00000005
RP1                               00000006
SBODEN                            00000004
SBOREN                            00000004
SCS                               00000000
SELF                              0000002B
SEVEN_SEG_CODE_LOOKUP             0000024E
STACK_BASE                        00000020
STACK_LIMIT                       0000006F
STATUS                            00000003
SWDTEN                            00000000
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1GINV                            00000007
T1GSS                             00000001
T1IE                              00000000
T1IF                              00000000
T1OSCEN                           00000003
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
T2IE                              00000001
T2IF                              00000001
TEST_B1_1                         000000EF
TEST_B2                           000000F9
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1                              0000000E
TMR1CS                            00000001
TMR1GE                            00000006
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE 23


SYMBOL TABLE
  LABEL                             VALUE 

TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISC                             00000087
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TUN0                              00000000
TUN1                              00000001
TUN2                              00000002
TUN3                              00000003
TUN4                              00000004
ULPWUE                            00000005
VALUE_BIN                         0000005D
VCFG                              00000006
VR0                               00000000
VR1                               00000001
VR2                               00000002
VR3                               00000003
VRCON                             00000099
VREN                              00000007
VRR                               00000005
W                                 00000000
WDTCON                            00000018
WDTPS0                            00000001
WDTPS1                            00000002
WDTPS2                            00000003
WDTPS3                            00000004
WPU                               00000095
WPU0                              00000000
WPU1                              00000001
WPU2                              00000002
WPU4                              00000004
WPU5                              00000005
WPUA                              00000095
WPUA0                             00000000
WPUA1                             00000001
WPUA2                             00000002
WPUA4                             00000004
WPUA5                             00000005
WR                                00000001
WREN                              00000002
WRERR                             00000003
Z                                 00000002
_BOD_NSLEEP                       00003EFF
_BOD_OFF                          00003CFF
_BOD_ON                           00003FFF
_BOD_SBODEN                       00003DFF
_BOREN_NSLEEP                     00003EFF
_BOREN_OFF                        00003CFF
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE 24


SYMBOL TABLE
  LABEL                             VALUE 

_BOREN_ON                         00003FFF
_BOREN_SBODEN                     00003DFF
_CONFIG                           00002007
_CPD_OFF                          00003FFF
_CPD_ON                           00003F7F
_CP_OFF                           00003FFF
_CP_ON                            00003FBF
_DEVID1                           00002006
_EC_OSC                           00003FFB
_EXTRC                            00003FFF
_EXTRCIO                          00003FFE
_EXTRC_OSC_CLKOUT                 00003FFF
_EXTRC_OSC_NOCLKOUT               00003FFE
_FCMEN_OFF                        000037FF
_FCMEN_ON                         00003FFF
_FOSC_EC                          00003FFB
_FOSC_EXTRCCLK                    00003FFF
_FOSC_EXTRCIO                     00003FFE
_FOSC_HS                          00003FFA
_FOSC_INTOSCCLK                   00003FFD
_FOSC_INTOSCIO                    00003FFC
_FOSC_LP                          00003FF8
_FOSC_XT                          00003FF9
_FUNCTIONS_0019                   00000019
_FUNCTIONS_008D                   0000008D
_FUNCTIONS_009A                   0000009A
_FUNCTIONS_00A4                   000000A4
_FUNCTIONS_00C4                   000000C4
_HS_OSC                           00003FFA
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_IESO_OFF                         00003BFF
_IESO_ON                          00003FFF
_INTOSC                           00003FFD
_INTOSCIO                         00003FFC
_INTRC_OSC_CLKOUT                 00003FFD
_INTRC_OSC_NOCLKOUT               00003FFC
_LP_OSC                           00003FF8
_MCLRE_OFF                        00003FDF
_MCLRE_ON                         00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FEF
_WDTE_OFF                         00003FF7
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FF7
_WDT_ON                           00003FFF
_XT_OSC                           00003FF9
__16F684                          00000001
command_0                         00000070
command_1                         00000070
command_2                         00000070
MPASM 5.55  /HOME/GILSON/UFRGS/MICROS/PROJET   4-2-2014  1:07:49         PAGE 25


SYMBOL TABLE
  LABEL                             VALUE 

command_3                         00000070
command_4                         00000070
command_5                         00000070
command_6                         00000070
command_7                         00000070
command_8                         00000070
command_9                         00000070
command_close_all                 00000070
command_enter                     00000070
command_motor_direct              00000070
command_motor_reverse             0000007B
command_open_all                  00000070
counter                           00000059
final_da_execucao                 0000010A
motor_pos                         00000058
pos_value                         00000057
record_addr                       00000004
record_data                       00000003
st1                               00000071
st2                               0000007C
start                             00000000
status_temp                       00000002
w_bk                              00000001
w_temp                            00000000

Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :     3 reported,    23 suppressed

